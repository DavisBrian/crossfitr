/* cfux.css 0.0.1 | UNLICENSED License | CrossFit IT - CrossFit, Inc. */require(["dynamic-component","jquery","games-lb-init","games-lb-update","games-lb-render","games-lb-helpers","games-lb-config","games-lb-generator","underscore"],function(a,b,c,d,e,f,g,h,i){function j(a,c,d,e){f.getLeaderboardInfo(a).then(function(){var d=b(e).data(),h={affiliate:d.affiliateId,athlete:d.athleteId||d.teamId,division:d.teamId?g.CONTROL.VALUE.DIVISION.TEAM:d.divisionId,region:d.regionId};a("setActiveView",h);var i=c();return i.activeAffiliateId?f.retrieveAffiliateLeaderboard(a,i):f.retrieveLeaderboard(a,i)}).then(function(){a("completeInitialization")});var h=document.getElementById("globalMenu"),j=document.getElementById("gamesMenuHalf"),k=i.debounce(function(c){f.retrieveAffiliateLeaderboard(a,c).then(function(){var a=document.querySelector(".athletes");a&&f.scrollTo(b(a).offset().top-h.offsetHeight-(c.isMobile()?0:j.offsetHeight))})},400),l=c();d(function(a){var b=f.getRedirectUrl(a.controls.list);b?window.location=b:a.initialized&&a.activeAffiliateId&&l.footer.currentPage!=a.footer.currentPage&&k(a),l=a})}function k(){var a=c();return a.set({persistQueryString:!1,activeAffiliateId:null,perPage:g.PERSONALIZED_PAGE_SIZE,tabs:[{display:"2017 Open",value:null,selected:!0}]}),a}function l(a,b,c){var e=a.get();if("setSelectedTab"===b);else if("setAthletes"===b){var h=e.workouts.length,i=f.getSelectedAthleteID(e.controls.list);c.forEach(function(a){a.highlight=e.activeAffiliateId?!1:i==a.userid,a.expanded=e.activeAffiliateId?!1:i==a.userid,f.normalizeAthleteScores(a,h)}),a.set({athletes:c})}else{if("setActiveView"!==b)return d.apply({},arguments);c.affiliate?a.set({activeAffiliateId:c.affiliate}):(d(a,"setMultiselectChildSelectedValue",{controlIndex:f.findIndexWhere(e.controls.list,{name:g.CONTROL.NAME.FITTEST}),selectedValue:c.region}),d(a,"setControlSelectedValue",{controlIndex:f.findIndexWhere(e.controls.list,{name:g.CONTROL.NAME.DIVISION}),selectedValue:c.division}),d(a,"setControlSelectedValue",{controlIndex:f.findIndexWhere(e.controls.list,{name:g.CONTROL.NAME.ATHLETE_SEARCH}),selectedValue:{display:null,value:c.athlete}}))}}function m(a,b){var c=b.isMobile(),d=".inner";d+=b.isLoading()?".loading":"",d+=b.initialized?"":".loading-initial",d+=b.globalError?".global-error":"",d+=c?".mobile":".desktop";var f=b.workouts,g=b.athletes,h=c?e.renderMobileAthletes(a,f,g):e.renderDesktopAthletes(a,f,g,q,b.controls.list);return r("div"+d,[e.renderGlobalError(b.globalError),n(a,b.tabs),h,b.activeAffiliateId?o(a,c,b.footer):p(b)])}function n(a,b){return r("div.tabs",b.map(function(b){var c="tab"+(b.selected?".active":"");return r("div."+c,{"ev-click":function(c){a("setSelectedTab",b.value)}},[b.display])}))}function o(a,b,c){return r("div.footer",[b?e.renderMobileFooterPages(a,c):e.renderDesktopFooterPages(a,c)])}function p(a){var b=f.getSelectedDivision(a.controls.list);return r("div.btn-wrapper",[r("a.btn.btn-outline",{attributes:{href:g.LEADERBOARD_URL+"?division="+b}},["View Full Leaderboard"])])}function q(a,b){window.location.href=f.getAthleteProfileLink(b.userid,b.division)}var r=a.h;h({selector:".lb-athlete, .lb-team, .lb-affiliate",init:k,update:l,render:m,callback:j})});